{"version":3,"file":"admin-settings.js","mappings":"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","sources":["webpack://woo-stripe-payment/./assets/js/admin/admin-settings.js","webpack://woo-stripe-payment/external window \"jQuery\"","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/createClass.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/toPrimitive.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/toPropertyKey.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/typeof.js","webpack://woo-stripe-payment/webpack/bootstrap"],"sourcesContent":["import $ from 'jquery';\n\nclass Settings {\n    constructor(params) {\n        this.params = params;\n        this.prefix = '#' + $('#wc_stripe_prefix').val();\n    }\n\n    init() {\n        $('[name^=\"woocommerce_stripe\"]').on('change', this.display_children.bind(this));\n\n        $('select.stripe-accepted-cards').on('select2:select', this.reorder_multiselect);\n\n        $('.api-register-domain').on('click', this.register_domain.bind(this));\n\n        $('.wc-stripe-create-webhook').on('click', this.manage_webhook.bind(this));\n\n        $('.wc-stripe-connection-test').on('click', this.do_connection_test.bind(this));\n\n        $('.stripe-delete-connection').on('click', this.do_delete_connection.bind(this));\n\n        $(document.body).on('change', '.payment-method-config-options', this.fetchPaymentMethodConfigSettings.bind(this));\n\n        $(document.body).on('click', '.add-new-payment-config', this.renderPaymentConfigModal.bind(this));\n\n        $(document.body).on('click', '#create-payment-config', this.createPaymentMethodConfig.bind(this));\n\n        $(document.body).on('click', '.refresh-payment-config', this.refreshPaymentConfig.bind(this));\n\n        if (typeof (wc_stripe_admin_notices) != 'undefined') {\n            this.display_notices();\n        }\n\n        this.display_children();\n\n        if (window.location.search.match(/_stripe_connect_nonce/)) {\n            history.pushState({}, '', window.location.pathname + '?page=wc-settings&tab=checkout&section=stripe_api');\n        }\n\n        $(document.body).on('submit', '#mainform', this.validateForm.bind(this));\n    }\n\n    display_children(e) {\n        $('[data-show-if]').each(function (i, el) {\n            var $this = $(el);\n            var values = $this.data('show-if');\n            var hidden = [];\n            $.each(values, function (k, v) {\n                var $key = $(this.prefix + k);\n                if (hidden.indexOf($this.attr('id')) == -1) {\n                    if ($key.is(':checkbox')) {\n                        if ($key.is(':checked') == v) {\n                            $this.closest('tr').show();\n                        } else {\n                            $this.closest('tr').hide();\n                            hidden.push($this.attr('id'));\n                        }\n                    } else {\n                        if ($key.val() == v) {\n                            $this.closest('tr').show();\n                        } else {\n                            $this.closest('tr').hide();\n                            hidden.push($this.attr('id'));\n                        }\n                    }\n                } else {\n                    $this.closest('tr').hide();\n                    hidden.push($this.attr('id'));\n                }\n            }.bind(this));\n        }.bind(this));\n    }\n\n    reorder_multiselect(e) {\n        var element = e.params.data.element;\n        var $element = $(element);\n        $element.detach();\n        $(this).append($element);\n        $(this).trigger('change');\n    }\n\n    register_domain(e) {\n        e.preventDefault();\n        this.block();\n        $.ajax({\n            url: this.params.routes.apple_domain,\n            dataType: 'json',\n            method: 'POST',\n            data: {_wpnonce: this.params.rest_nonce, hostname: window.location.hostname}\n        }).done((response) => {\n            this.unblock();\n            if (response.code) {\n                window.alert(response.message);\n            } else {\n                window.alert(response.message);\n            }\n        }).fail((xhr, textStatus, errorThrown) => {\n            this.unblock();\n            window.alert(errorThrown);\n        })\n    }\n\n    manage_webhook(e) {\n        e.preventDefault();\n        if ($(e.currentTarget).is('.wc-stripe-delete-webhook')) {\n            this.delete_webhook();\n        } else {\n            this.create_webhook();\n        }\n    }\n\n    create_webhook() {\n        this.block();\n        var env = $('#woocommerce_stripe_api_mode').val();\n        $.ajax({\n            url: this.params.routes.create_webhook,\n            dataType: 'json',\n            method: 'POST',\n            data: {_wpnonce: this.params.rest_nonce, environment: env}\n        }).done((response) => {\n            this.unblock();\n            if (response.code) {\n                window.alert(response.message);\n            } else {\n                $('#woocommerce_stripe_api_webhook_secret_' + env).val(response.secret);\n                window.alert(response.message);\n                window.location.reload();\n            }\n        }).fail((xhr, textStatus, errorThrown) => {\n            this.unblock();\n            window.alert(errorThrown);\n        })\n    }\n\n    delete_webhook() {\n        this.block();\n        var mode = $('#woocommerce_stripe_api_mode').val();\n        $.ajax({\n            url: this.params.routes.delete_webhook,\n            dataType: 'json',\n            method: 'POST',\n            data: {_wpnonce: this.params.rest_nonce, mode: mode}\n        }).done(function (response) {\n            this.unblock();\n            if (response.code) {\n                window.alert(response.message);\n            } else {\n                $('#woocommerce_stripe_api_webhook_secret_' + mode).val('');\n                window.location.reload();\n            }\n        }.bind(this)).fail(function (xhr, textStatus, errorThrown) {\n            this.unblock();\n            window.alert(errorThrown);\n        }.bind(this))\n    }\n\n    do_connection_test(e) {\n        e.preventDefault();\n        this.block();\n        var mode = $('#woocommerce_stripe_api_mode').val();\n        $.ajax({\n            url: this.params.routes.connection_test,\n            dataType: 'json',\n            method: 'POST',\n            data: (() => {\n                var data = {\n                    _wpnonce: this.params.rest_nonce,\n                    mode: mode\n                };\n                if (mode === 'test') {\n                    data.secret_key = $('#woocommerce_stripe_api_secret_key_test').val();\n                    data.publishable_key = $('#woocommerce_stripe_api_publishable_key_test').val();\n                }\n                return data;\n            })()\n        }).done(response => {\n            this.unblock();\n            if (response.code) {\n                window.alert(response.message);\n            } else {\n                window.alert(response.message);\n            }\n        }).fail((xhr, textStatus, errorThrown) => {\n            this.unblock();\n            window.alert(errorThrown);\n        })\n    }\n\n    display_notices() {\n        $.each(wc_stripe_admin_notices, function (idx, notice) {\n            $('.woo-nav-tab-wrapper').after(notice);\n        }.bind(this))\n    }\n\n    block() {\n        $('.wc-stripe-settings-container').block({\n            message: null,\n            overlayCSS: {\n                background: '#fff',\n                opacity: 0.6\n            }\n        });\n    }\n\n    unblock() {\n        $('.wc-stripe-settings-container').unblock();\n    }\n\n    do_delete_connection(e) {\n        e.preventDefault();\n        if (confirm(this.params.messages.delete_connection)) {\n            this.block();\n            $.ajax({\n                method: 'POST',\n                url: this.params.routes.delete_connection,\n                dataType: 'json',\n                data: {_wpnonce: this.params.rest_nonce}\n            }).done(function (response) {\n                this.unblock();\n                if (!response.code) {\n                    window.location.reload();\n                } else {\n                    window.alert(response.message);\n                }\n            }.bind(this)).fail(function () {\n                this.unblock();\n            }.bind(this));\n        }\n    }\n\n    createPaymentMethodConfig(e) {\n        e.preventDefault();\n        const $button = $(e.currentTarget);\n        const oldText = $button.text();\n        $button.text(this.params.messages.create).prop('disabled', true);\n        $.ajax({\n            method: 'POST',\n            url: this.params.routes.create_payment_method_config,\n            dataType: 'json',\n            data: {_wpnonce: this.params.rest_nonce, name: $('#payment_config_name').val()}\n        }).done(response => {\n            $button.text(oldText).prop('disabled', false);\n            if (!response.code) {\n                $('.wc-stripe-settings-container').replaceWith(response.html);\n                $(document.body).trigger('wc-enhanced-select-init');\n                $('.modal-close').click();\n            } else {\n                window.alert(response.message);\n            }\n        }).fail(() => {\n            $button.text(oldText).prop('disabled', false);\n        });\n    }\n\n    fetchPaymentMethodConfigSettings(e) {\n        this.block();\n        const enabled = $('#woocommerce_stripe_upm_enabled').is(':checked');\n        $.ajax({\n            method: 'POST',\n            url: this.params.routes.fetch_payment_method_config,\n            dataType: 'json',\n            data: {\n                _wpnonce: this.params.rest_nonce,\n                payment_config: $(e.currentTarget).val()\n            }\n        }).done(response => {\n            this.unblock();\n            if (!response.code) {\n                $('.wc-stripe-settings-container').replaceWith(response.html);\n                $('#woocommerce_stripe_upm_enabled').prop('checked', enabled);\n                $(document.body).trigger('wc-enhanced-select-init');\n                $('.modal-close').click();\n            } else {\n                window.alert(response.message);\n            }\n        }).fail(() => {\n            this.unblock();\n        });\n    }\n\n    renderPaymentConfigModal(e) {\n        e.preventDefault();\n        $(e.currentTarget).WCBackboneModal({\n            template: 'wc-stripe-modal-payment-config',\n            variable: ''\n        })\n    }\n\n    validateForm(e) {\n        if ($('.wc-stripe-settings-container').hasClass('stripe_upm')) {\n            if ($('.payment-method-config-options').val() === '') {\n                window.alert(this.params.messages.upm_validation);\n                return false;\n            }\n        }\n    }\n\n    refreshPaymentConfig(e) {\n        e.preventDefault();\n        const $button = $(e.currentTarget);\n        $button.prop('disabled', true).find('span').addClass('processing');\n        $.ajax({\n            method: 'POST',\n            url: this.params.routes.refresh_payment_method_config,\n            dataType: 'json',\n            data: {\n                _wpnonce: this.params.rest_nonce,\n                payment_config: $(e.currentTarget).val()\n            }\n        }).done(response => {\n            $button.prop('disabled', false).find('span').removeClass('processing');\n            if (!response.code) {\n                $('.wc-stripe-settings-container').replaceWith(response.html);\n                $(document.body).trigger('wc-enhanced-select-init');\n            } else {\n                window.alert(response.message);\n            }\n        }).fail(() => {\n            $button.prop('disabled', false).find('span').removeClass('processing');\n        });\n    }\n\n}\n\n$(() => {\n    (new Settings(wc_stripe_setting_params)).init();\n})","module.exports = window[\"jQuery\"];","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\nmodule.exports = _interopRequireDefault, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nmodule.exports = toPrimitive, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar toPrimitive = require(\"./toPrimitive.js\");\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nmodule.exports = toPropertyKey, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n"],"names":["_jquery","Settings","module","exports","window","instance","Constructor","TypeError","__esModule","toPropertyKey","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","obj","_typeof","t","r","e","Symbol","toPrimitive","call","String","Number","o","iterator","constructor","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","_interopRequireDefault","require","_createClass2","default","params","_classCallCheck2","this","prefix","$","val","value","on","display_children","bind","reorder_multiselect","register_domain","manage_webhook","do_connection_test","do_delete_connection","document","body","fetchPaymentMethodConfigSettings","renderPaymentConfigModal","createPaymentMethodConfig","refreshPaymentConfig","wc_stripe_admin_notices","display_notices","location","search","match","history","pushState","pathname","validateForm","each","el","$this","values","data","hidden","k","v","$key","indexOf","attr","is","closest","show","hide","push","element","$element","detach","append","trigger","_this","preventDefault","block","ajax","url","routes","apple_domain","dataType","method","_wpnonce","rest_nonce","hostname","done","response","unblock","code","alert","message","fail","xhr","textStatus","errorThrown","currentTarget","delete_webhook","create_webhook","_this2","env","environment","secret","reload","mode","_this3","connection_test","secret_key","publishable_key","idx","notice","after","overlayCSS","background","opacity","confirm","messages","delete_connection","$button","oldText","text","create","prop","create_payment_method_config","name","replaceWith","html","click","_this4","enabled","fetch_payment_method_config","payment_config","WCBackboneModal","template","variable","hasClass","upm_validation","find","addClass","refresh_payment_method_config","removeClass","wc_stripe_setting_params","init"],"sourceRoot":""}