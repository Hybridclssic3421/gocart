{"version":3,"file":"product-addons.js","mappings":"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","sources":["webpack://wc_stripe/external window \"jQuery\"","webpack://wc_stripe/external window [\"wc_stripe\"]","webpack://wc_stripe/./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack://wc_stripe/./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack://wc_stripe/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://wc_stripe/./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack://wc_stripe/./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack://wc_stripe/./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack://wc_stripe/./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack://wc_stripe/./node_modules/@babel/runtime/helpers/toPrimitive.js","webpack://wc_stripe/./node_modules/@babel/runtime/helpers/toPropertyKey.js","webpack://wc_stripe/./node_modules/@babel/runtime/helpers/typeof.js","webpack://wc_stripe/./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack://wc_stripe/webpack/bootstrap","webpack://wc_stripe/./packages/woocommerce-product-addons/assets/js/product.js"],"sourcesContent":["module.exports = window[\"jQuery\"];","module.exports = window[\"wc_stripe\"];","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\nmodule.exports = _arrayWithoutHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\nmodule.exports = _interopRequireDefault, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nmodule.exports = _iterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableSpread, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\nvar iterableToArray = require(\"./iterableToArray.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\nmodule.exports = _toConsumableArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nmodule.exports = toPrimitive, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar toPrimitive = require(\"./toPrimitive.js\");\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nmodule.exports = toPropertyKey, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import $ from 'jquery';\nimport {product_gateways as gateways} from '@paymentplugins/wc-stripe';\n\nconst handleFieldChange = (e) => {\n    // when a extra product option field changes, update the cart calculation\n    gateways.forEach(gateway => {\n        if (gateway.maybe_calculate_cart) {\n            gateway.maybe_calculate_cart();\n        }\n    });\n}\n\nconst getExtraProductData = () => {\n    const data = $('form.cart .wc-pao-addon-field').serializeArray().reduce((carry, obj) => {\n        if (/([\\w\\-\\_]+)\\[\\]$/.test(obj.name)) {\n            const name = obj.name.substring(0, obj.name.length - 2);\n            return {\n                ...carry,\n                [name]: [\n                    ...(carry[name] || []),\n                    obj.value\n                ]\n            }\n        }\n        return {...carry, [obj.name]: obj.value};\n    }, {});\n    return data;\n}\n\n$(() => {\n    if (gateways.length) {\n\n        gateways.forEach(gateway => {\n            // add to cart data function wrapper\n            const getAddToCartData = gateway.get_add_to_cart_data;\n            gateway.get_add_to_cart_data = () => {\n                return {\n                    ...getAddToCartData.call(gateway),\n                    ...getExtraProductData()\n                }\n            }\n        });\n\n        $(document.body).on('updated_addons', 'form.cart', handleFieldChange);\n    }\n})"],"names":["module","exports","window","arr","len","length","i","arr2","Array","__esModule","arrayLikeToArray","isArray","toPropertyKey","obj","key","value","Object","defineProperty","enumerable","configurable","writable","iter","Symbol","iterator","from","TypeError","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","_typeof","t","r","e","toPrimitive","call","String","Number","o","constructor","prototype","minLen","n","toString","slice","name","test","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","_jquery","_interopRequireDefault","require","_wcStripe","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","push","apply","_objectSpread","arguments","forEach","_defineProperty2","default","getOwnPropertyDescriptors","defineProperties","handleFieldChange","gateways","gateway","maybe_calculate_cart","$","getAddToCartData","get_add_to_cart_data","serializeArray","reduce","carry","substring","concat","_toConsumableArray2","document","body","on"],"sourceRoot":""}